#
# Compile options:
#
# Set -DNEW_CTIME if using the table-driven version of ctime (i.e., if
#   your struct tm contains a tm_zone field), i.e. SunOS 4.1.x. Don't
#   define for system V or Solaris
# Set -DBIGFONT= and -DSMALLFONT= whatever fonts you like
# Pick -O or -g
#

SHAREDIR=/usr/share/sunclock

#ifdef HPArchitecture
CCOPTIONS = -Ae -DBIGFONT=\"6x13\" -DSMALLFONT=\"6x10\" -DAPPDEF=\"$(DESTDIR)$(XAPPLOADDIR)\" -DSHAREDIR=\"$(DESTDIR)$(SHAREDIR)\"
#else
# SunOS
#CCOPTIONS=-DBIGFONT=\"6x13\" -DSMALLFONT=\"6x10\" -O -DNEW_CTIME -DAPPDEF=\"$(DESTDIR)$(XAPPLOADDIR)\" -DSHAREDIR=\"$(DESTDIR)$(SHAREDIR)\"
# Solaris, Linux
CCOPTIONS=-DBIGFONT=\"6x13\" -DSMALLFONT=\"6x10\" -O -DAPPDEF=\"$(DESTDIR)$(XAPPLOADDIR)\" -DSHAREDIR=\"$(DESTDIR)$(SHAREDIR)\"
#endif

SRCS=sunclock.c astro.c tildepath.c
OBJS=sunclock.o astro.o tildepath.o
LOCAL_LIBRARIES=$(XLIB) -lm
DEPLIBS=		# I don't know what I'm doing, and I hate imake!

all::
	gcc mapgen.c -o mapgen -lm
	./mapgen -xbm -mode 0 -width 720 -height 360 -name map_icon \
	   > map_icon.xbm
	./mapgen -xbm -mode 3 -width 128 -height 64 -name clock_icon \
	   > clock_icon.xbm

clean::
	rm -f mapgen map_icon.xbm clock_icon.xbm

realclean:: clean
	rm -f Makefile

ComplexProgramTarget(sunclock)
InstallAppDefaults(Sunclock)
	mkdirhier $(DESTDIR)$(SHAREDIR)
	cp -f i18n/Sunclock.* $(DESTDIR)$(SHAREDIR)
	cat WARNING
